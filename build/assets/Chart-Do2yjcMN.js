import{r as s,c as m,j as e,C as x,e as p,f as h,g as u,h as g,i as b,k as f,l as j}from"./index-C_OMrv1E.js";import{B as k}from"./Breadcrumb-Br7EOIgD.js";const N="/assets/homeProveedor-DIZxynUL.png",w=()=>{const[l,c]=s.useState("");s.useEffect(()=>{r()},[]);const r=async()=>{try{const{data:t}=await m.get("/api/suppliers/getTotalSuppliers");c(t.totalSuppliers),console.log(t.totalSuppliers)}catch(t){console.log(t)}};return e.jsxs("div",{className:"rounded-lg border border-stroke bg-white dark:bg-boxdark dark:border-strokedark p-4 flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 mr-4",children:e.jsx("img",{src:N,alt:"Ícono de Mortalidad",className:"h-24 w-24"})}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("h4",{className:"font-bold text-black dark:text-white",children:"Proveedores"}),e.jsx("h1",{className:"text-title-lg font-bold text-black dark:text-white",style:{fontSize:30},children:l}),e.jsx("span",{className:"text-sm font-medium",children:"Total de Proveedores Registrados"})]})]})},y="/assets/homeCompras-DOT8LRBW.png",v=()=>{const[l,c]=s.useState(0);s.useEffect(()=>{r()},[]);const r=async()=>{try{const{data:t}=await m.get("/api/buys/getTotalBuys");t&&t.totalcompras?c(parseFloat(t.totalcompras)):console.error("Error: No se encontró totalcompras en la respuesta.")}catch(t){console.error("Error al obtener totalcompras:",t)}};return e.jsxs("div",{className:"rounded-lg border border-stroke bg-white dark:bg-boxdark dark:border-strokedark p-4 flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 mr-4",children:e.jsx("img",{src:y,alt:"Ícono de Mortalidad",className:"h-24 w-24"})}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("h4",{className:"font-bold text-black dark:text-white",children:"Compra Alimento"}),e.jsxs("h1",{className:"text-title-lg font-bold text-black dark:text-white",style:{fontSize:30},children:["$ ",l.toLocaleString("es-ES",{minimumFractionDigits:0})]}),e.jsx("span",{className:"text-sm font-medium",children:"Valor en Alimento Comprado"})]})]})},C="/assets/homeInsumos-Lc9hKtc_.png",S=()=>{const[l,c]=s.useState(0),[r,t]=s.useState(0),[n,a]=s.useState(0);s.useEffect(()=>{d(),i()},[]);const d=async()=>{try{const{data:o}=await m.get("/api/supplies/getTotalSupplies");o&&o.totalcompras?c(parseFloat(o.totalcompras)):console.error("Error: No se encontró totalinsumos en la respuesta.")}catch(o){console.error("Error al obtener totalinsumos:",o)}},i=async()=>{try{const{data:o}=await m.get("/api/buys/getTotalBuys");o&&o.totalcompras?t(parseFloat(o.totalcompras)):console.error("Error: No se encontró totalcompras en la respuesta.")}catch(o){console.error("Error al obtener totalcompras:",o)}};return s.useEffect(()=>{a(l+r)},[l,r]),e.jsxs("div",{className:"rounded-lg border border-stroke bg-white dark:bg-boxdark dark:border-strokedark p-4 flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 mr-4",children:e.jsx("img",{src:C,alt:"Ícono de Mortalidad",className:"h-24 w-24"})}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("h4",{className:"font-bold text-black dark:text-white",children:"Insumos y Gastos"}),e.jsxs("h1",{className:"text-title-lg font-bold text-black dark:text-white",style:{fontSize:30},children:["$ ",n.toLocaleString("es-ES",{minimumFractionDigits:0})]}),e.jsx("span",{className:"text-sm font-medium",children:"Valor Total de Gastos"})]})]})},E="/assets/homeVentas-CNCJUPy6.png",T=()=>{const[l,c]=s.useState("");s.useEffect(()=>{r()},[]);const r=async()=>{try{const{data:n}=await m.get("/api/sale/getTotalSale");c(n.total_sales)}catch(n){console.log(n)}},t=n=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(n);return e.jsxs("div",{className:"rounded-lg border border-stroke bg-white dark:bg-boxdark dark:border-strokedark p-4 flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 mr-4",children:e.jsx("img",{src:E,alt:"Ícono de Mortalidad",className:"h-24 w-24"})}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("h4",{className:"font-bold text-black dark:text-white",children:"Ventas"}),e.jsx("h1",{className:"text-title-lg font-bold text-black dark:text-white",style:{fontSize:30},children:t(l)}),e.jsx("span",{className:"text-sm font-medium",children:"Valor Total de Ventas"})]})]})},R=()=>{const[l,c]=s.useState([]),[r,t]=s.useState("");s.useEffect(()=>{(async()=>{try{const d=await m.get("/api/lote/getAll");c(d.data)}catch(d){console.error("Error al cargar lotes:",d)}})()},[]);const n=async()=>{if(!r){alert("Por favor, selecciona un lote.");return}try{const a=await m.get(`/api/lote/${r}/invoice/`,{responseType:"blob"}),d=window.URL.createObjectURL(new Blob([a.data])),i=document.createElement("a");i.href=d,i.setAttribute("download",`REPORTE_GENERAL_${r}.pdf`),document.body.appendChild(i),i.click(),i.remove()}catch(a){console.error("Error al descargar el reporte:",a)}};return e.jsxs(e.Fragment,{children:[e.jsx(k,{pageName:"Reportes Generales"}),e.jsx("p",{className:"mb-5",children:"Selecciona el lote de aves del cual deseas descargar el reporte general en PDF."}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{htmlFor:"lote-select",className:"mr-3",children:"Selecciona un Lote:"}),e.jsxs("select",{className:" rounded-lg border-[1.5px] border-stroke bg-transparent py-3 px-5 font-medium outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary",value:r,onChange:a=>t(a.target.value),children:[e.jsx("option",{value:"",children:"Selecciona un lote"}),l.map(a=>e.jsx("option",{value:a.id,children:a.descripcion},a.id))]}),e.jsx("button",{onClick:n,className:"ml-5 bg-primary text-white rounded px-4 py-2",children:"Descargar Reporte"})]}),e.jsxs("div",{className:"mb-5 grid grid-cols-1 gap-4 md:grid-cols-2 md:gap-6 xl:grid-cols-4 2xl:gap-7.5",children:[e.jsx(x,{}),e.jsx(T,{}),e.jsx(p,{}),e.jsx(S,{}),e.jsx(v,{}),e.jsx(h,{}),e.jsx(u,{}),e.jsx(w,{})]}),e.jsxs("div",{className:"grid grid-cols-12 gap-4 md:gap-6 2xl:gap-7.5",children:[e.jsx("div",{className:"col-span-12",children:e.jsx(g,{})}),e.jsx(b,{}),e.jsx(f,{}),e.jsx(j,{})]})]})};export{R as default};
